// 终极出库流程修复脚本 - 确保每个环节都有数据显示
// 在浏览器控制台运行: ultimateOutboundFix()

function ultimateOutboundFix() {
  console.log('🔥 开始终极修复出库流程 - 确保每个环节都有数据！')
  
  // 彻底清除现有数据
  console.log('🧹 彻底清理现有数据...')
  localStorage.removeItem('outbound_orders')
  localStorage.removeItem('wms_warehouses')
  localStorage.removeItem('wms_products')
  localStorage.removeItem('inventory_stock')
  localStorage.removeItem('wms_stock_movements')
  
  // 创建基础数据
  console.log('📋 重新创建完整基础数据...')
  
  const warehouses = [
    { 
      id: 1, 
      name: '主仓库', 
      code: 'WH001', 
      status: '启用', 
      location: '北京市朝阳区主仓库地址',
      manager: '张经理',
      phone: '010-12345678'
    },
    { 
      id: 2, 
      name: '分仓库', 
      code: 'WH002', 
      status: '启用', 
      location: '上海市浦东新区分仓库地址',
      manager: '李经理',
      phone: '021-87654321'
    }
  ]
  localStorage.setItem('wms_warehouses', JSON.stringify(warehouses))
  
  const products = [
    { 
      id: 1, code: 'P001', isku: 'SKU001', name: '高级测试商品A', unit: '个', price: 50.00, 
      image: '', category: '电子产品', brand: '测试品牌A',
      attributes: [
        { name: '颜色', value: '红色' }, 
        { name: '尺寸', value: 'M' },
        { name: '重量', value: '0.5kg' }
      ] 
    },
    { 
      id: 2, code: 'P002', isku: 'SKU002', name: '精品测试商品B', unit: '件', price: 30.00, 
      image: '', category: '服装', brand: '测试品牌B',
      attributes: [
        { name: '颜色', value: '蓝色' }, 
        { name: '尺寸', value: 'L' },
        { name: '材质', value: '棉质' }
      ] 
    },
    { 
      id: 3, code: 'P003', isku: 'SKU003', name: '优质测试商品C', unit: '盒', price: 25.00, 
      image: '', category: '食品', brand: '测试品牌C',
      attributes: [
        { name: '规格', value: '500ml' },
        { name: '保质期', value: '12个月' }
      ] 
    },
    { 
      id: 4, code: 'P004', isku: 'SKU004', name: '特殊测试商品D', unit: '套', price: 80.00, 
      image: '', category: '家居', brand: '测试品牌D',
      attributes: [
        { name: '材质', value: '不锈钢' },
        { name: '尺寸', value: '30x20cm' }
      ] 
    }
  ]\n  localStorage.setItem('wms_products', JSON.stringify(products))\n  \n  const inventory = [\n    { id: 1, product_id: 1, product_code: 'P001', warehouse_id: 1, current_stock: 100, available_stock: 90, reserved_stock: 10, location: 'A001' },\n    { id: 2, product_id: 2, product_code: 'P002', warehouse_id: 1, current_stock: 80, available_stock: 70, reserved_stock: 10, location: 'A002' },\n    { id: 3, product_id: 3, product_code: 'P003', warehouse_id: 1, current_stock: 60, available_stock: 50, reserved_stock: 10, location: 'B001' },\n    { id: 4, product_id: 4, product_code: 'P004', warehouse_id: 1, current_stock: 40, available_stock: 35, reserved_stock: 5, location: 'B002' },\n    { id: 5, product_id: 1, product_code: 'P001', warehouse_id: 2, current_stock: 50, available_stock: 45, reserved_stock: 5, location: 'C001' },\n    { id: 6, product_id: 2, product_code: 'P002', warehouse_id: 2, current_stock: 30, available_stock: 25, reserved_stock: 5, location: 'C002' }\n  ]\n  localStorage.setItem('inventory_stock', JSON.stringify(inventory))\n  \n  // 创建完整的出库单数据 - 确保每个状态都有多个订单\n  console.log('📦 创建完整的出库单数据...')\n  const currentTime = new Date().toLocaleString()\n  const baseTime = new Date()\n  \n  const outboundOrders = [\n    // ========================= 草稿状态 =========================\n    {\n      id: 5001,\n      order_no: 'OUT20241201001',\n      customer_name: '草稿客户A',\n      customer_phone: '13800138001',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'draft',\n      expected_date: new Date(baseTime.getTime() + 24 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 15.00,\n      delivery_address: '北京市朝阳区草稿测试地址123号',\n      delivery_contact: '张先生',\n      delivery_phone: '13800138001',\n      remark: '草稿状态测试单 - 待确认出库',\n      products: [{\n        product_id: 1, product_code: 'P001', isku: 'SKU001', product_name: '高级测试商品A',\n        unit: '个', available_stock: 90, quantity: 8, unit_price: 50.00, amount: 400.00,\n        attributes: [{ name: '颜色', value: '红色' }, { name: '尺寸', value: 'M' }]\n      }],\n      total_amount: 400.00,\n      created_by: '系统管理员',\n      created_at: currentTime,\n      updated_at: currentTime\n    },\n    {\n      id: 5002,\n      order_no: 'OUT20241201002',\n      customer_name: '草稿客户B',\n      customer_phone: '13800138002',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'draft',\n      expected_date: new Date(baseTime.getTime() + 48 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 20.00,\n      delivery_address: '上海市浦东新区草稿测试地址456号',\n      delivery_contact: '李女士',\n      delivery_phone: '13800138002',\n      remark: '第二个草稿状态测试单',\n      products: [{\n        product_id: 2, product_code: 'P002', isku: 'SKU002', product_name: '精品测试商品B',\n        unit: '件', available_stock: 70, quantity: 5, unit_price: 30.00, amount: 150.00,\n        attributes: [{ name: '颜色', value: '蓝色' }, { name: '尺寸', value: 'L' }]\n      }],\n      total_amount: 150.00,\n      created_by: '系统管理员',\n      created_at: currentTime,\n      updated_at: currentTime\n    },\n    \n    // ========================= 预发货状态 =========================\n    {\n      id: 5003,\n      order_no: 'OUT20241201003',\n      customer_name: '预发货客户A',\n      customer_phone: '13800138003',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'pre_delivery',\n      expected_date: new Date(baseTime.getTime() + 72 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 25.00,\n      delivery_address: '广州市天河区预发货测试地址789号',\n      delivery_contact: '王先生',\n      delivery_phone: '13800138003',\n      remark: '预发货状态测试单 - 可开始拣货',\n      confirmed_at: new Date(baseTime.getTime() - 60 * 60 * 1000).toLocaleString(),\n      products: [{\n        product_id: 3, product_code: 'P003', isku: 'SKU003', product_name: '优质测试商品C',\n        unit: '盒', available_stock: 50, quantity: 6, unit_price: 25.00, amount: 150.00,\n        attributes: [{ name: '规格', value: '500ml' }]\n      }],\n      total_amount: 150.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 2 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5004,\n      order_no: 'OUT20241201004',\n      customer_name: '预发货客户B',\n      customer_phone: '13800138004',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'low',\n      status: 'pre_delivery',\n      expected_date: new Date(baseTime.getTime() + 96 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 18.00,\n      delivery_address: '深圳市南山区预发货测试地址101号',\n      delivery_contact: '赵女士',\n      delivery_phone: '13800138004',\n      remark: '第二个预发货状态测试单',\n      confirmed_at: new Date(baseTime.getTime() - 30 * 60 * 1000).toLocaleString(),\n      products: [{\n        product_id: 4, product_code: 'P004', isku: 'SKU004', product_name: '特殊测试商品D',\n        unit: '套', available_stock: 35, quantity: 3, unit_price: 80.00, amount: 240.00,\n        attributes: [{ name: '材质', value: '不锈钢' }]\n      }],\n      total_amount: 240.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 90 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= 拣货中状态 =========================\n    {\n      id: 5005,\n      order_no: 'OUT20241201005',\n      customer_name: '拣货客户A',\n      customer_phone: '13800138005',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'picking',\n      expected_date: new Date(baseTime.getTime() + 120 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 22.00,\n      delivery_address: '杭州市西湖区拣货测试地址202号',\n      delivery_contact: '陈先生',\n      delivery_phone: '13800138005',\n      remark: '拣货中状态测试单 - 正在拣货',\n      confirmed_at: new Date(baseTime.getTime() - 3 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 90 * 60 * 1000).toLocaleString(),\n      picker_staff: [1, 2], // 重要：拣货人员ID\n      picking_strategy: 'zone',\n      estimated_picking_time: 2.0,\n      picking_priority: 'medium',\n      picking_remark: '按库区拣货策略执行',\n      products: [{\n        product_id: 1, product_code: 'P001', isku: 'SKU001', product_name: '高级测试商品A',\n        unit: '个', available_stock: 90, quantity: 10, unit_price: 50.00, amount: 500.00,\n        attributes: [{ name: '颜色', value: '红色' }],\n        picking_quantity: 10, // 计划拣货数量\n        actual_picked_quantity: 6, // 实际已拣数量\n        actual_picking_remark: '正在拣货中，进度60%'\n      }],\n      total_amount: 500.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5006,\n      order_no: 'OUT20241201006',\n      customer_name: '拣货客户B',\n      customer_phone: '13800138006',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'picking',\n      expected_date: new Date(baseTime.getTime() + 144 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 28.00,\n      delivery_address: '成都市高新区拣货测试地址303号',\n      delivery_contact: '林女士',\n      delivery_phone: '13800138006',\n      remark: '第二个拣货中状态测试单',\n      confirmed_at: new Date(baseTime.getTime() - 2 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [3], // 单人拣货\n      picking_strategy: 'batch',\n      estimated_picking_time: 1.5,\n      picking_priority: 'high',\n      picking_remark: '批量拣货策略执行',\n      products: [{\n        product_id: 2, product_code: 'P002', isku: 'SKU002', product_name: '精品测试商品B',\n        unit: '件', available_stock: 70, quantity: 8, unit_price: 30.00, amount: 240.00,\n        attributes: [{ name: '颜色', value: '蓝色' }],\n        picking_quantity: 8,\n        actual_picked_quantity: 8, // 已完成拣货\n        actual_picking_remark: '拣货已完成，待确认'\n      }],\n      total_amount: 240.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 3 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= 打包中状态 =========================\n    {\n      id: 5007,\n      order_no: 'OUT20241201007',\n      customer_name: '打包客户A',\n      customer_phone: '13800138007',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'low',\n      status: 'packing',\n      expected_date: new Date(baseTime.getTime() + 168 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 30.00,\n      delivery_address: '武汉市武昌区打包测试地址404号',\n      delivery_contact: '黄先生',\n      delivery_phone: '13800138007',\n      remark: '打包中状态测试单 - 正在打包',\n      confirmed_at: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 5 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [2],\n      packer_staff: 3, // 重要：打包人员ID\n      package_type: 'standard_box',\n      package_count: 2,\n      total_weight: 3.5,\n      package_fee: 8.00,\n      packing_remark: '标准纸箱打包',\n      products: [{\n        product_id: 3, product_code: 'P003', isku: 'SKU003', product_name: '优质测试商品C',\n        unit: '盒', available_stock: 50, quantity: 12, unit_price: 25.00, amount: 300.00,\n        attributes: [{ name: '规格', value: '500ml' }],\n        actual_picked_quantity: 12,\n        packed_quantity: 8, // 部分打包\n        package_spec: 'batch',\n        packing_remark: '正在分批打包中'\n      }],\n      total_amount: 300.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 8 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5008,\n      order_no: 'OUT20241201008',\n      customer_name: '打包客户B',\n      customer_phone: '13800138008',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'packing',\n      expected_date: new Date(baseTime.getTime() + 192 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 35.00,\n      delivery_address: '南京市鼓楼区打包测试地址505号',\n      delivery_contact: '周女士',\n      delivery_phone: '13800138008',\n      remark: '第二个打包中状态测试单',\n      confirmed_at: new Date(baseTime.getTime() - 5 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 3 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [1],\n      packer_staff: 2, // 打包人员\n      package_type: 'thick_box',\n      package_count: 1,\n      total_weight: 2.8,\n      package_fee: 5.00,\n      packing_remark: '加厚纸箱打包',\n      products: [{\n        product_id: 4, product_code: 'P004', isku: 'SKU004', product_name: '特殊测试商品D',\n        unit: '套', available_stock: 35, quantity: 4, unit_price: 80.00, amount: 320.00,\n        attributes: [{ name: '材质', value: '不锈钢' }],\n        actual_picked_quantity: 4,\n        packed_quantity: 4, // 已完成打包\n        package_spec: 'special',\n        packing_remark: '特殊包装已完成'\n      }],\n      total_amount: 320.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= 待发货状态 =========================\n    {\n      id: 5009,\n      order_no: 'OUT20241201009',\n      customer_name: '发货客户A',\n      customer_phone: '13800138009',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'shipping',\n      expected_date: new Date(baseTime.getTime() + 216 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 40.00,\n      delivery_address: '西安市雁塔区发货测试地址606号',\n      delivery_contact: '吴先生',\n      delivery_phone: '13800138009',\n      remark: '待发货状态测试单 - 可安排发货',\n      confirmed_at: new Date(baseTime.getTime() - 10 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 9 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 8 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [1, 3],\n      packer_staff: 2,\n      package_type: 'foam_box',\n      package_count: 1,\n      total_weight: 4.2,\n      package_fee: 12.00,\n      packing_remark: '泡沫箱包装',\n      products: [{\n        product_id: 1, product_code: 'P001', isku: 'SKU001', product_name: '高级测试商品A',\n        unit: '个', available_stock: 90, quantity: 15, unit_price: 50.00, amount: 750.00,\n        attributes: [{ name: '颜色', value: '红色' }],\n        actual_picked_quantity: 15,\n        packed_quantity: 15,\n        package_spec: 'single'\n      }],\n      total_amount: 750.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 12 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5010,\n      order_no: 'OUT20241201010',\n      customer_name: '发货客户B',\n      customer_phone: '13800138010',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'medium',\n      status: 'shipping',\n      expected_date: new Date(baseTime.getTime() + 240 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 32.00,\n      delivery_address: '青岛市市南区发货测试地址707号',\n      delivery_contact: '郑女士',\n      delivery_phone: '13800138010',\n      remark: '第二个待发货状态测试单',\n      confirmed_at: new Date(baseTime.getTime() - 8 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 7 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [2],\n      packer_staff: 1,\n      package_type: 'wooden_box',\n      package_count: 2,\n      total_weight: 6.8,\n      package_fee: 20.00,\n      packing_remark: '木箱包装',\n      products: [{\n        product_id: 2, product_code: 'P002', isku: 'SKU002', product_name: '精品测试商品B',\n        unit: '件', available_stock: 70, quantity: 20, unit_price: 30.00, amount: 600.00,\n        attributes: [{ name: '颜色', value: '蓝色' }],\n        actual_picked_quantity: 20,\n        packed_quantity: 20,\n        package_spec: 'batch'\n      }],\n      total_amount: 600.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 10 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= 已完成状态 =========================\n    {\n      id: 5011,\n      order_no: 'OUT20241201011',\n      customer_name: '完成客户A',\n      customer_phone: '13800138011',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'sale',\n      priority: 'low',\n      status: 'completed',\n      expected_date: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 25.00,\n      delivery_address: '大连市沙河口区完成测试地址808号',\n      delivery_contact: '孙先生',\n      delivery_phone: '13800138011',\n      remark: '已完成状态测试单 - 流程结束',\n      confirmed_at: new Date(baseTime.getTime() - 72 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 71 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 70 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 68 * 60 * 60 * 1000).toLocaleString(),\n      shipping_completed_time: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [3],\n      packer_staff: 1,\n      logistics_company_code: 'SF',\n      logistics_company: '顺丰速运',\n      tracking_number: 'SF2024120112345678',\n      package_type: 'standard_box',\n      package_count: 1,\n      total_weight: 1.8,\n      package_fee: 3.00,\n      products: [{\n        product_id: 3, product_code: 'P003', isku: 'SKU003', product_name: '优质测试商品C',\n        unit: '盒', available_stock: 50, quantity: 6, unit_price: 25.00, amount: 150.00,\n        attributes: [{ name: '规格', value: '500ml' }],\n        actual_picked_quantity: 6,\n        packed_quantity: 6\n      }],\n      total_amount: 150.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 76 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString()\n    },\n    {\n      id: 5012,\n      order_no: 'OUT20241201012',\n      customer_name: '完成客户B',\n      customer_phone: '13800138012',\n      warehouse_id: 1,\n      warehouse_name: '主仓库',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'completed',\n      expected_date: new Date(baseTime.getTime() - 24 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 45.00,\n      delivery_address: '长沙市岳麓区完成测试地址909号',\n      delivery_contact: '钱女士',\n      delivery_phone: '13800138012',\n      remark: '第二个已完成状态测试单',\n      confirmed_at: new Date(baseTime.getTime() - 50 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 49 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 46 * 60 * 60 * 1000).toLocaleString(),\n      shipping_completed_time: new Date(baseTime.getTime() - 24 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [1, 2],\n      packer_staff: 3,\n      logistics_company_code: 'YTO',\n      logistics_company: '圆通速递',\n      tracking_number: 'YT2024120187654321',\n      package_type: 'thick_box',\n      package_count: 3,\n      total_weight: 8.5,\n      package_fee: 15.00,\n      products: [{\n        product_id: 4, product_code: 'P004', isku: 'SKU004', product_name: '特殊测试商品D',\n        unit: '套', available_stock: 35, quantity: 8, unit_price: 80.00, amount: 640.00,\n        attributes: [{ name: '材质', value: '不锈钢' }],\n        actual_picked_quantity: 8,\n        packed_quantity: 8\n      }],\n      total_amount: 640.00,\n      created_by: '系统管理员',\n      created_at: new Date(baseTime.getTime() - 52 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: new Date(baseTime.getTime() - 24 * 60 * 60 * 1000).toLocaleString()\n    }\n  ]\n  \n  localStorage.setItem('outbound_orders', JSON.stringify(outboundOrders))\n  localStorage.setItem('wms_stock_movements', JSON.stringify([]))\n  \n  console.log('🎉 终极修复完成！')\n  console.log('')\n  console.log('📊 数据统计:')\n  console.log('   ✅ 草稿: 2个')\n  console.log('   ✅ 预发货: 2个')\n  console.log('   ✅ 拣货中: 2个 ⭐')\n  console.log('   ✅ 打包中: 2个 ⭐')\n  console.log('   ✅ 待发货: 2个 ⭐')\n  console.log('   ✅ 已完成: 2个')\n  console.log('')\n  console.log('🔥 现在每个标签页都有充足的测试数据！')\n  console.log('🔄 请立即刷新页面查看效果')\n  console.log('')\n  console.log('🎯 完整流程测试建议:')\n  console.log('   1. 草稿 → 确认出库单 → 预发货')\n  console.log('   2. 预发货 → 开始拣货 → 拣货中')\n  console.log('   3. 拣货中 → 完成拣货 → 打包中')\n  console.log('   4. 打包中 → 完成打包 → 待发货')\n  console.log('   5. 待发货 → 确认发货 → 已完成')\n  \n  return {\n    warehouses: warehouses.length,\n    products: products.length,\n    inventory: inventory.length,\n    orders: outboundOrders.length,\n    statusBreakdown: {\n      draft: 2,\n      pre_delivery: 2,\n      picking: 2,\n      packing: 2,\n      shipping: 2,\n      completed: 2\n    },\n    success: true\n  }\n}\n\n// 快速验证所有环节数据\nfunction verifyAllSteps() {\n  const orders = JSON.parse(localStorage.getItem('outbound_orders') || '[]')\n  const statusCount = {}\n  \n  orders.forEach(order => {\n    statusCount[order.status] = (statusCount[order.status] || 0) + 1\n  })\n  \n  console.log('🔍 所有环节验证结果:')\n  console.log('   📋 发货单(全部):', orders.length, '个')\n  console.log('   📝 草稿:', statusCount.draft || 0, '个')\n  console.log('   📤 预发货:', statusCount.pre_delivery || 0, '个')\n  console.log('   📦 拣货中:', statusCount.picking || 0, '个')\n  console.log('   📦 打包中:', statusCount.packing || 0, '个')\n  console.log('   🚚 待发货:', statusCount.shipping || 0, '个')\n  console.log('   ✅ 已完成:', statusCount.completed || 0, '个')\n  \n  // 检查关键字段\n  const pickingOrders = orders.filter(o => o.status === 'picking')\n  const packingOrders = orders.filter(o => o.status === 'packing')\n  const shippingOrders = orders.filter(o => o.status === 'shipping')\n  \n  console.log('')\n  console.log('🔧 关键字段检查:')\n  console.log('   拣货订单拣货员:', pickingOrders.map(o => `${o.order_no}:${o.picker_staff?.length || 0}人`))\n  console.log('   打包订单打包员:', packingOrders.map(o => `${o.order_no}:${o.packer_staff ? '已分配' : '未分配'}`))\n  console.log('   发货订单包装:', shippingOrders.map(o => `${o.order_no}:${o.package_type || '未设置'}`))\n  \n  return statusCount\n}\n\n// 测试状态流转\nfunction testStatusFlow(orderNo) {\n  const orders = JSON.parse(localStorage.getItem('outbound_orders') || '[]')\n  const order = orders.find(o => o.order_no === orderNo)\n  \n  if (!order) {\n    console.log('❌ 订单不存在:', orderNo)\n    return false\n  }\n  \n  console.log('🔄 测试订单状态流转:', orderNo)\n  console.log('   当前状态:', order.status)\n  \n  const nextStatus = {\n    'draft': 'pre_delivery',\n    'pre_delivery': 'picking', \n    'picking': 'packing',\n    'packing': 'shipping',\n    'shipping': 'completed'\n  }\n  \n  if (nextStatus[order.status]) {\n    const index = orders.findIndex(o => o.id === order.id)\n    orders[index].status = nextStatus[order.status]\n    orders[index].updated_at = new Date().toLocaleString()\n    localStorage.setItem('outbound_orders', JSON.stringify(orders))\n    \n    console.log('   ✅ 状态已更新为:', nextStatus[order.status])\n    console.log('   🔄 请刷新页面查看变化')\n    return true\n  } else {\n    console.log('   ℹ️ 订单已是最终状态')\n    return false\n  }\n}\n\n// 导出到全局\nwindow.ultimateOutboundFix = ultimateOutboundFix\nwindow.verifyAllSteps = verifyAllSteps\nwindow.testStatusFlow = testStatusFlow\n\nconsole.log('🔥 终极出库流程修复脚本已加载')\nconsole.log('🚀 运行 ultimateOutboundFix() 终极修复所有问题')\nconsole.log('🔍 运行 verifyAllSteps() 验证所有环节')\nconsole.log('🔄 运行 testStatusFlow(\"订单号\") 测试状态流转')