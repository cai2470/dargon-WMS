// ç»ˆæå‡ºåº“æµç¨‹ä¿®å¤è„šæœ¬ - ç¡®ä¿æ¯ä¸ªç¯èŠ‚éƒ½æœ‰æ•°æ®æ˜¾ç¤º
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ: ultimateOutboundFix()

function ultimateOutboundFix() {
  console.log('ğŸ”¥ å¼€å§‹ç»ˆæä¿®å¤å‡ºåº“æµç¨‹ - ç¡®ä¿æ¯ä¸ªç¯èŠ‚éƒ½æœ‰æ•°æ®ï¼')
  
  // å½»åº•æ¸…é™¤ç°æœ‰æ•°æ®
  console.log('ğŸ§¹ å½»åº•æ¸…ç†ç°æœ‰æ•°æ®...')
  localStorage.removeItem('outbound_orders')
  localStorage.removeItem('wms_warehouses')
  localStorage.removeItem('wms_products')
  localStorage.removeItem('inventory_stock')
  localStorage.removeItem('wms_stock_movements')
  
  // åˆ›å»ºåŸºç¡€æ•°æ®
  console.log('ğŸ“‹ é‡æ–°åˆ›å»ºå®Œæ•´åŸºç¡€æ•°æ®...')
  
  const warehouses = [
    { 
      id: 1, 
      name: 'ä¸»ä»“åº“', 
      code: 'WH001', 
      status: 'å¯ç”¨', 
      location: 'åŒ—äº¬å¸‚æœé˜³åŒºä¸»ä»“åº“åœ°å€',
      manager: 'å¼ ç»ç†',
      phone: '010-12345678'
    },
    { 
      id: 2, 
      name: 'åˆ†ä»“åº“', 
      code: 'WH002', 
      status: 'å¯ç”¨', 
      location: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºåˆ†ä»“åº“åœ°å€',
      manager: 'æç»ç†',
      phone: '021-87654321'
    }
  ]
  localStorage.setItem('wms_warehouses', JSON.stringify(warehouses))
  
  const products = [
    { 
      id: 1, code: 'P001', isku: 'SKU001', name: 'é«˜çº§æµ‹è¯•å•†å“A', unit: 'ä¸ª', price: 50.00, 
      image: '', category: 'ç”µå­äº§å“', brand: 'æµ‹è¯•å“ç‰ŒA',
      attributes: [
        { name: 'é¢œè‰²', value: 'çº¢è‰²' }, 
        { name: 'å°ºå¯¸', value: 'M' },
        { name: 'é‡é‡', value: '0.5kg' }
      ] 
    },
    { 
      id: 2, code: 'P002', isku: 'SKU002', name: 'ç²¾å“æµ‹è¯•å•†å“B', unit: 'ä»¶', price: 30.00, 
      image: '', category: 'æœè£…', brand: 'æµ‹è¯•å“ç‰ŒB',
      attributes: [
        { name: 'é¢œè‰²', value: 'è“è‰²' }, 
        { name: 'å°ºå¯¸', value: 'L' },
        { name: 'æè´¨', value: 'æ£‰è´¨' }
      ] 
    },
    { 
      id: 3, code: 'P003', isku: 'SKU003', name: 'ä¼˜è´¨æµ‹è¯•å•†å“C', unit: 'ç›’', price: 25.00, 
      image: '', category: 'é£Ÿå“', brand: 'æµ‹è¯•å“ç‰ŒC',
      attributes: [
        { name: 'è§„æ ¼', value: '500ml' },
        { name: 'ä¿è´¨æœŸ', value: '12ä¸ªæœˆ' }
      ] 
    },
    { 
      id: 4, code: 'P004', isku: 'SKU004', name: 'ç‰¹æ®Šæµ‹è¯•å•†å“D', unit: 'å¥—', price: 80.00, 
      image: '', category: 'å®¶å±…', brand: 'æµ‹è¯•å“ç‰ŒD',
      attributes: [
        { name: 'æè´¨', value: 'ä¸é”ˆé’¢' },
        { name: 'å°ºå¯¸', value: '30x20cm' }
      ] 
    }
  ]\n  localStorage.setItem('wms_products', JSON.stringify(products))\n  \n  const inventory = [\n    { id: 1, product_id: 1, product_code: 'P001', warehouse_id: 1, current_stock: 100, available_stock: 90, reserved_stock: 10, location: 'A001' },\n    { id: 2, product_id: 2, product_code: 'P002', warehouse_id: 1, current_stock: 80, available_stock: 70, reserved_stock: 10, location: 'A002' },\n    { id: 3, product_id: 3, product_code: 'P003', warehouse_id: 1, current_stock: 60, available_stock: 50, reserved_stock: 10, location: 'B001' },\n    { id: 4, product_id: 4, product_code: 'P004', warehouse_id: 1, current_stock: 40, available_stock: 35, reserved_stock: 5, location: 'B002' },\n    { id: 5, product_id: 1, product_code: 'P001', warehouse_id: 2, current_stock: 50, available_stock: 45, reserved_stock: 5, location: 'C001' },\n    { id: 6, product_id: 2, product_code: 'P002', warehouse_id: 2, current_stock: 30, available_stock: 25, reserved_stock: 5, location: 'C002' }\n  ]\n  localStorage.setItem('inventory_stock', JSON.stringify(inventory))\n  \n  // åˆ›å»ºå®Œæ•´çš„å‡ºåº“å•æ•°æ® - ç¡®ä¿æ¯ä¸ªçŠ¶æ€éƒ½æœ‰å¤šä¸ªè®¢å•\n  console.log('ğŸ“¦ åˆ›å»ºå®Œæ•´çš„å‡ºåº“å•æ•°æ®...')\n  const currentTime = new Date().toLocaleString()\n  const baseTime = new Date()\n  \n  const outboundOrders = [\n    // ========================= è‰ç¨¿çŠ¶æ€ =========================\n    {\n      id: 5001,\n      order_no: 'OUT20241201001',\n      customer_name: 'è‰ç¨¿å®¢æˆ·A',\n      customer_phone: '13800138001',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'draft',\n      expected_date: new Date(baseTime.getTime() + 24 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 15.00,\n      delivery_address: 'åŒ—äº¬å¸‚æœé˜³åŒºè‰ç¨¿æµ‹è¯•åœ°å€123å·',\n      delivery_contact: 'å¼ å…ˆç”Ÿ',\n      delivery_phone: '13800138001',\n      remark: 'è‰ç¨¿çŠ¶æ€æµ‹è¯•å• - å¾…ç¡®è®¤å‡ºåº“',\n      products: [{\n        product_id: 1, product_code: 'P001', isku: 'SKU001', product_name: 'é«˜çº§æµ‹è¯•å•†å“A',\n        unit: 'ä¸ª', available_stock: 90, quantity: 8, unit_price: 50.00, amount: 400.00,\n        attributes: [{ name: 'é¢œè‰²', value: 'çº¢è‰²' }, { name: 'å°ºå¯¸', value: 'M' }]\n      }],\n      total_amount: 400.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: currentTime,\n      updated_at: currentTime\n    },\n    {\n      id: 5002,\n      order_no: 'OUT20241201002',\n      customer_name: 'è‰ç¨¿å®¢æˆ·B',\n      customer_phone: '13800138002',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'draft',\n      expected_date: new Date(baseTime.getTime() + 48 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 20.00,\n      delivery_address: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºè‰ç¨¿æµ‹è¯•åœ°å€456å·',\n      delivery_contact: 'æå¥³å£«',\n      delivery_phone: '13800138002',\n      remark: 'ç¬¬äºŒä¸ªè‰ç¨¿çŠ¶æ€æµ‹è¯•å•',\n      products: [{\n        product_id: 2, product_code: 'P002', isku: 'SKU002', product_name: 'ç²¾å“æµ‹è¯•å•†å“B',\n        unit: 'ä»¶', available_stock: 70, quantity: 5, unit_price: 30.00, amount: 150.00,\n        attributes: [{ name: 'é¢œè‰²', value: 'è“è‰²' }, { name: 'å°ºå¯¸', value: 'L' }]\n      }],\n      total_amount: 150.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: currentTime,\n      updated_at: currentTime\n    },\n    \n    // ========================= é¢„å‘è´§çŠ¶æ€ =========================\n    {\n      id: 5003,\n      order_no: 'OUT20241201003',\n      customer_name: 'é¢„å‘è´§å®¢æˆ·A',\n      customer_phone: '13800138003',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'pre_delivery',\n      expected_date: new Date(baseTime.getTime() + 72 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 25.00,\n      delivery_address: 'å¹¿å·å¸‚å¤©æ²³åŒºé¢„å‘è´§æµ‹è¯•åœ°å€789å·',\n      delivery_contact: 'ç‹å…ˆç”Ÿ',\n      delivery_phone: '13800138003',\n      remark: 'é¢„å‘è´§çŠ¶æ€æµ‹è¯•å• - å¯å¼€å§‹æ‹£è´§',\n      confirmed_at: new Date(baseTime.getTime() - 60 * 60 * 1000).toLocaleString(),\n      products: [{\n        product_id: 3, product_code: 'P003', isku: 'SKU003', product_name: 'ä¼˜è´¨æµ‹è¯•å•†å“C',\n        unit: 'ç›’', available_stock: 50, quantity: 6, unit_price: 25.00, amount: 150.00,\n        attributes: [{ name: 'è§„æ ¼', value: '500ml' }]\n      }],\n      total_amount: 150.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 2 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5004,\n      order_no: 'OUT20241201004',\n      customer_name: 'é¢„å‘è´§å®¢æˆ·B',\n      customer_phone: '13800138004',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'low',\n      status: 'pre_delivery',\n      expected_date: new Date(baseTime.getTime() + 96 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 18.00,\n      delivery_address: 'æ·±åœ³å¸‚å—å±±åŒºé¢„å‘è´§æµ‹è¯•åœ°å€101å·',\n      delivery_contact: 'èµµå¥³å£«',\n      delivery_phone: '13800138004',\n      remark: 'ç¬¬äºŒä¸ªé¢„å‘è´§çŠ¶æ€æµ‹è¯•å•',\n      confirmed_at: new Date(baseTime.getTime() - 30 * 60 * 1000).toLocaleString(),\n      products: [{\n        product_id: 4, product_code: 'P004', isku: 'SKU004', product_name: 'ç‰¹æ®Šæµ‹è¯•å•†å“D',\n        unit: 'å¥—', available_stock: 35, quantity: 3, unit_price: 80.00, amount: 240.00,\n        attributes: [{ name: 'æè´¨', value: 'ä¸é”ˆé’¢' }]\n      }],\n      total_amount: 240.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 90 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= æ‹£è´§ä¸­çŠ¶æ€ =========================\n    {\n      id: 5005,\n      order_no: 'OUT20241201005',\n      customer_name: 'æ‹£è´§å®¢æˆ·A',\n      customer_phone: '13800138005',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'picking',\n      expected_date: new Date(baseTime.getTime() + 120 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 22.00,\n      delivery_address: 'æ­å·å¸‚è¥¿æ¹–åŒºæ‹£è´§æµ‹è¯•åœ°å€202å·',\n      delivery_contact: 'é™ˆå…ˆç”Ÿ',\n      delivery_phone: '13800138005',\n      remark: 'æ‹£è´§ä¸­çŠ¶æ€æµ‹è¯•å• - æ­£åœ¨æ‹£è´§',\n      confirmed_at: new Date(baseTime.getTime() - 3 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 90 * 60 * 1000).toLocaleString(),\n      picker_staff: [1, 2], // é‡è¦ï¼šæ‹£è´§äººå‘˜ID\n      picking_strategy: 'zone',\n      estimated_picking_time: 2.0,\n      picking_priority: 'medium',\n      picking_remark: 'æŒ‰åº“åŒºæ‹£è´§ç­–ç•¥æ‰§è¡Œ',\n      products: [{\n        product_id: 1, product_code: 'P001', isku: 'SKU001', product_name: 'é«˜çº§æµ‹è¯•å•†å“A',\n        unit: 'ä¸ª', available_stock: 90, quantity: 10, unit_price: 50.00, amount: 500.00,\n        attributes: [{ name: 'é¢œè‰²', value: 'çº¢è‰²' }],\n        picking_quantity: 10, // è®¡åˆ’æ‹£è´§æ•°é‡\n        actual_picked_quantity: 6, // å®é™…å·²æ‹£æ•°é‡\n        actual_picking_remark: 'æ­£åœ¨æ‹£è´§ä¸­ï¼Œè¿›åº¦60%'\n      }],\n      total_amount: 500.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5006,\n      order_no: 'OUT20241201006',\n      customer_name: 'æ‹£è´§å®¢æˆ·B',\n      customer_phone: '13800138006',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'picking',\n      expected_date: new Date(baseTime.getTime() + 144 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 28.00,\n      delivery_address: 'æˆéƒ½å¸‚é«˜æ–°åŒºæ‹£è´§æµ‹è¯•åœ°å€303å·',\n      delivery_contact: 'æ—å¥³å£«',\n      delivery_phone: '13800138006',\n      remark: 'ç¬¬äºŒä¸ªæ‹£è´§ä¸­çŠ¶æ€æµ‹è¯•å•',\n      confirmed_at: new Date(baseTime.getTime() - 2 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [3], // å•äººæ‹£è´§\n      picking_strategy: 'batch',\n      estimated_picking_time: 1.5,\n      picking_priority: 'high',\n      picking_remark: 'æ‰¹é‡æ‹£è´§ç­–ç•¥æ‰§è¡Œ',\n      products: [{\n        product_id: 2, product_code: 'P002', isku: 'SKU002', product_name: 'ç²¾å“æµ‹è¯•å•†å“B',\n        unit: 'ä»¶', available_stock: 70, quantity: 8, unit_price: 30.00, amount: 240.00,\n        attributes: [{ name: 'é¢œè‰²', value: 'è“è‰²' }],\n        picking_quantity: 8,\n        actual_picked_quantity: 8, // å·²å®Œæˆæ‹£è´§\n        actual_picking_remark: 'æ‹£è´§å·²å®Œæˆï¼Œå¾…ç¡®è®¤'\n      }],\n      total_amount: 240.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 3 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= æ‰“åŒ…ä¸­çŠ¶æ€ =========================\n    {\n      id: 5007,\n      order_no: 'OUT20241201007',\n      customer_name: 'æ‰“åŒ…å®¢æˆ·A',\n      customer_phone: '13800138007',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'low',\n      status: 'packing',\n      expected_date: new Date(baseTime.getTime() + 168 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 30.00,\n      delivery_address: 'æ­¦æ±‰å¸‚æ­¦æ˜ŒåŒºæ‰“åŒ…æµ‹è¯•åœ°å€404å·',\n      delivery_contact: 'é»„å…ˆç”Ÿ',\n      delivery_phone: '13800138007',\n      remark: 'æ‰“åŒ…ä¸­çŠ¶æ€æµ‹è¯•å• - æ­£åœ¨æ‰“åŒ…',\n      confirmed_at: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 5 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [2],\n      packer_staff: 3, // é‡è¦ï¼šæ‰“åŒ…äººå‘˜ID\n      package_type: 'standard_box',\n      package_count: 2,\n      total_weight: 3.5,\n      package_fee: 8.00,\n      packing_remark: 'æ ‡å‡†çº¸ç®±æ‰“åŒ…',\n      products: [{\n        product_id: 3, product_code: 'P003', isku: 'SKU003', product_name: 'ä¼˜è´¨æµ‹è¯•å•†å“C',\n        unit: 'ç›’', available_stock: 50, quantity: 12, unit_price: 25.00, amount: 300.00,\n        attributes: [{ name: 'è§„æ ¼', value: '500ml' }],\n        actual_picked_quantity: 12,\n        packed_quantity: 8, // éƒ¨åˆ†æ‰“åŒ…\n        package_spec: 'batch',\n        packing_remark: 'æ­£åœ¨åˆ†æ‰¹æ‰“åŒ…ä¸­'\n      }],\n      total_amount: 300.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 8 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5008,\n      order_no: 'OUT20241201008',\n      customer_name: 'æ‰“åŒ…å®¢æˆ·B',\n      customer_phone: '13800138008',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'packing',\n      expected_date: new Date(baseTime.getTime() + 192 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 35.00,\n      delivery_address: 'å—äº¬å¸‚é¼“æ¥¼åŒºæ‰“åŒ…æµ‹è¯•åœ°å€505å·',\n      delivery_contact: 'å‘¨å¥³å£«',\n      delivery_phone: '13800138008',\n      remark: 'ç¬¬äºŒä¸ªæ‰“åŒ…ä¸­çŠ¶æ€æµ‹è¯•å•',\n      confirmed_at: new Date(baseTime.getTime() - 5 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 3 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [1],\n      packer_staff: 2, // æ‰“åŒ…äººå‘˜\n      package_type: 'thick_box',\n      package_count: 1,\n      total_weight: 2.8,\n      package_fee: 5.00,\n      packing_remark: 'åŠ åšçº¸ç®±æ‰“åŒ…',\n      products: [{\n        product_id: 4, product_code: 'P004', isku: 'SKU004', product_name: 'ç‰¹æ®Šæµ‹è¯•å•†å“D',\n        unit: 'å¥—', available_stock: 35, quantity: 4, unit_price: 80.00, amount: 320.00,\n        attributes: [{ name: 'æè´¨', value: 'ä¸é”ˆé’¢' }],\n        actual_picked_quantity: 4,\n        packed_quantity: 4, // å·²å®Œæˆæ‰“åŒ…\n        package_spec: 'special',\n        packing_remark: 'ç‰¹æ®ŠåŒ…è£…å·²å®Œæˆ'\n      }],\n      total_amount: 320.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= å¾…å‘è´§çŠ¶æ€ =========================\n    {\n      id: 5009,\n      order_no: 'OUT20241201009',\n      customer_name: 'å‘è´§å®¢æˆ·A',\n      customer_phone: '13800138009',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'high',\n      status: 'shipping',\n      expected_date: new Date(baseTime.getTime() + 216 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 40.00,\n      delivery_address: 'è¥¿å®‰å¸‚é›å¡”åŒºå‘è´§æµ‹è¯•åœ°å€606å·',\n      delivery_contact: 'å´å…ˆç”Ÿ',\n      delivery_phone: '13800138009',\n      remark: 'å¾…å‘è´§çŠ¶æ€æµ‹è¯•å• - å¯å®‰æ’å‘è´§',\n      confirmed_at: new Date(baseTime.getTime() - 10 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 9 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 8 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [1, 3],\n      packer_staff: 2,\n      package_type: 'foam_box',\n      package_count: 1,\n      total_weight: 4.2,\n      package_fee: 12.00,\n      packing_remark: 'æ³¡æ²«ç®±åŒ…è£…',\n      products: [{\n        product_id: 1, product_code: 'P001', isku: 'SKU001', product_name: 'é«˜çº§æµ‹è¯•å•†å“A',\n        unit: 'ä¸ª', available_stock: 90, quantity: 15, unit_price: 50.00, amount: 750.00,\n        attributes: [{ name: 'é¢œè‰²', value: 'çº¢è‰²' }],\n        actual_picked_quantity: 15,\n        packed_quantity: 15,\n        package_spec: 'single'\n      }],\n      total_amount: 750.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 12 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    {\n      id: 5010,\n      order_no: 'OUT20241201010',\n      customer_name: 'å‘è´§å®¢æˆ·B',\n      customer_phone: '13800138010',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'medium',\n      status: 'shipping',\n      expected_date: new Date(baseTime.getTime() + 240 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 32.00,\n      delivery_address: 'é’å²›å¸‚å¸‚å—åŒºå‘è´§æµ‹è¯•åœ°å€707å·',\n      delivery_contact: 'éƒ‘å¥³å£«',\n      delivery_phone: '13800138010',\n      remark: 'ç¬¬äºŒä¸ªå¾…å‘è´§çŠ¶æ€æµ‹è¯•å•',\n      confirmed_at: new Date(baseTime.getTime() - 8 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 7 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 6 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 4 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [2],\n      packer_staff: 1,\n      package_type: 'wooden_box',\n      package_count: 2,\n      total_weight: 6.8,\n      package_fee: 20.00,\n      packing_remark: 'æœ¨ç®±åŒ…è£…',\n      products: [{\n        product_id: 2, product_code: 'P002', isku: 'SKU002', product_name: 'ç²¾å“æµ‹è¯•å•†å“B',\n        unit: 'ä»¶', available_stock: 70, quantity: 20, unit_price: 30.00, amount: 600.00,\n        attributes: [{ name: 'é¢œè‰²', value: 'è“è‰²' }],\n        actual_picked_quantity: 20,\n        packed_quantity: 20,\n        package_spec: 'batch'\n      }],\n      total_amount: 600.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 10 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: currentTime\n    },\n    \n    // ========================= å·²å®ŒæˆçŠ¶æ€ =========================\n    {\n      id: 5011,\n      order_no: 'OUT20241201011',\n      customer_name: 'å®Œæˆå®¢æˆ·A',\n      customer_phone: '13800138011',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'sale',\n      priority: 'low',\n      status: 'completed',\n      expected_date: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 25.00,\n      delivery_address: 'å¤§è¿å¸‚æ²™æ²³å£åŒºå®Œæˆæµ‹è¯•åœ°å€808å·',\n      delivery_contact: 'å­™å…ˆç”Ÿ',\n      delivery_phone: '13800138011',\n      remark: 'å·²å®ŒæˆçŠ¶æ€æµ‹è¯•å• - æµç¨‹ç»“æŸ',\n      confirmed_at: new Date(baseTime.getTime() - 72 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 71 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 70 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 68 * 60 * 60 * 1000).toLocaleString(),\n      shipping_completed_time: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [3],\n      packer_staff: 1,\n      logistics_company_code: 'SF',\n      logistics_company: 'é¡ºä¸°é€Ÿè¿',\n      tracking_number: 'SF2024120112345678',\n      package_type: 'standard_box',\n      package_count: 1,\n      total_weight: 1.8,\n      package_fee: 3.00,\n      products: [{\n        product_id: 3, product_code: 'P003', isku: 'SKU003', product_name: 'ä¼˜è´¨æµ‹è¯•å•†å“C',\n        unit: 'ç›’', available_stock: 50, quantity: 6, unit_price: 25.00, amount: 150.00,\n        attributes: [{ name: 'è§„æ ¼', value: '500ml' }],\n        actual_picked_quantity: 6,\n        packed_quantity: 6\n      }],\n      total_amount: 150.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 76 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString()\n    },\n    {\n      id: 5012,\n      order_no: 'OUT20241201012',\n      customer_name: 'å®Œæˆå®¢æˆ·B',\n      customer_phone: '13800138012',\n      warehouse_id: 1,\n      warehouse_name: 'ä¸»ä»“åº“',\n      outbound_type: 'transfer',\n      priority: 'medium',\n      status: 'completed',\n      expected_date: new Date(baseTime.getTime() - 24 * 60 * 60 * 1000).toLocaleString(),\n      shipping_fee: 45.00,\n      delivery_address: 'é•¿æ²™å¸‚å²³éº“åŒºå®Œæˆæµ‹è¯•åœ°å€909å·',\n      delivery_contact: 'é’±å¥³å£«',\n      delivery_phone: '13800138012',\n      remark: 'ç¬¬äºŒä¸ªå·²å®ŒæˆçŠ¶æ€æµ‹è¯•å•',\n      confirmed_at: new Date(baseTime.getTime() - 50 * 60 * 60 * 1000).toLocaleString(),\n      picking_start_time: new Date(baseTime.getTime() - 49 * 60 * 60 * 1000).toLocaleString(),\n      picking_completed_time: new Date(baseTime.getTime() - 48 * 60 * 60 * 1000).toLocaleString(),\n      packing_completed_time: new Date(baseTime.getTime() - 46 * 60 * 60 * 1000).toLocaleString(),\n      shipping_completed_time: new Date(baseTime.getTime() - 24 * 60 * 60 * 1000).toLocaleString(),\n      picker_staff: [1, 2],\n      packer_staff: 3,\n      logistics_company_code: 'YTO',\n      logistics_company: 'åœ†é€šé€Ÿé€’',\n      tracking_number: 'YT2024120187654321',\n      package_type: 'thick_box',\n      package_count: 3,\n      total_weight: 8.5,\n      package_fee: 15.00,\n      products: [{\n        product_id: 4, product_code: 'P004', isku: 'SKU004', product_name: 'ç‰¹æ®Šæµ‹è¯•å•†å“D',\n        unit: 'å¥—', available_stock: 35, quantity: 8, unit_price: 80.00, amount: 640.00,\n        attributes: [{ name: 'æè´¨', value: 'ä¸é”ˆé’¢' }],\n        actual_picked_quantity: 8,\n        packed_quantity: 8\n      }],\n      total_amount: 640.00,\n      created_by: 'ç³»ç»Ÿç®¡ç†å‘˜',\n      created_at: new Date(baseTime.getTime() - 52 * 60 * 60 * 1000).toLocaleString(),\n      updated_at: new Date(baseTime.getTime() - 24 * 60 * 60 * 1000).toLocaleString()\n    }\n  ]\n  \n  localStorage.setItem('outbound_orders', JSON.stringify(outboundOrders))\n  localStorage.setItem('wms_stock_movements', JSON.stringify([]))\n  \n  console.log('ğŸ‰ ç»ˆæä¿®å¤å®Œæˆï¼')\n  console.log('')\n  console.log('ğŸ“Š æ•°æ®ç»Ÿè®¡:')\n  console.log('   âœ… è‰ç¨¿: 2ä¸ª')\n  console.log('   âœ… é¢„å‘è´§: 2ä¸ª')\n  console.log('   âœ… æ‹£è´§ä¸­: 2ä¸ª â­')\n  console.log('   âœ… æ‰“åŒ…ä¸­: 2ä¸ª â­')\n  console.log('   âœ… å¾…å‘è´§: 2ä¸ª â­')\n  console.log('   âœ… å·²å®Œæˆ: 2ä¸ª')\n  console.log('')\n  console.log('ğŸ”¥ ç°åœ¨æ¯ä¸ªæ ‡ç­¾é¡µéƒ½æœ‰å……è¶³çš„æµ‹è¯•æ•°æ®ï¼')\n  console.log('ğŸ”„ è¯·ç«‹å³åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœ')\n  console.log('')\n  console.log('ğŸ¯ å®Œæ•´æµç¨‹æµ‹è¯•å»ºè®®:')\n  console.log('   1. è‰ç¨¿ â†’ ç¡®è®¤å‡ºåº“å• â†’ é¢„å‘è´§')\n  console.log('   2. é¢„å‘è´§ â†’ å¼€å§‹æ‹£è´§ â†’ æ‹£è´§ä¸­')\n  console.log('   3. æ‹£è´§ä¸­ â†’ å®Œæˆæ‹£è´§ â†’ æ‰“åŒ…ä¸­')\n  console.log('   4. æ‰“åŒ…ä¸­ â†’ å®Œæˆæ‰“åŒ… â†’ å¾…å‘è´§')\n  console.log('   5. å¾…å‘è´§ â†’ ç¡®è®¤å‘è´§ â†’ å·²å®Œæˆ')\n  \n  return {\n    warehouses: warehouses.length,\n    products: products.length,\n    inventory: inventory.length,\n    orders: outboundOrders.length,\n    statusBreakdown: {\n      draft: 2,\n      pre_delivery: 2,\n      picking: 2,\n      packing: 2,\n      shipping: 2,\n      completed: 2\n    },\n    success: true\n  }\n}\n\n// å¿«é€ŸéªŒè¯æ‰€æœ‰ç¯èŠ‚æ•°æ®\nfunction verifyAllSteps() {\n  const orders = JSON.parse(localStorage.getItem('outbound_orders') || '[]')\n  const statusCount = {}\n  \n  orders.forEach(order => {\n    statusCount[order.status] = (statusCount[order.status] || 0) + 1\n  })\n  \n  console.log('ğŸ” æ‰€æœ‰ç¯èŠ‚éªŒè¯ç»“æœ:')\n  console.log('   ğŸ“‹ å‘è´§å•(å…¨éƒ¨):', orders.length, 'ä¸ª')\n  console.log('   ğŸ“ è‰ç¨¿:', statusCount.draft || 0, 'ä¸ª')\n  console.log('   ğŸ“¤ é¢„å‘è´§:', statusCount.pre_delivery || 0, 'ä¸ª')\n  console.log('   ğŸ“¦ æ‹£è´§ä¸­:', statusCount.picking || 0, 'ä¸ª')\n  console.log('   ğŸ“¦ æ‰“åŒ…ä¸­:', statusCount.packing || 0, 'ä¸ª')\n  console.log('   ğŸšš å¾…å‘è´§:', statusCount.shipping || 0, 'ä¸ª')\n  console.log('   âœ… å·²å®Œæˆ:', statusCount.completed || 0, 'ä¸ª')\n  \n  // æ£€æŸ¥å…³é”®å­—æ®µ\n  const pickingOrders = orders.filter(o => o.status === 'picking')\n  const packingOrders = orders.filter(o => o.status === 'packing')\n  const shippingOrders = orders.filter(o => o.status === 'shipping')\n  \n  console.log('')\n  console.log('ğŸ”§ å…³é”®å­—æ®µæ£€æŸ¥:')\n  console.log('   æ‹£è´§è®¢å•æ‹£è´§å‘˜:', pickingOrders.map(o => `${o.order_no}:${o.picker_staff?.length || 0}äºº`))\n  console.log('   æ‰“åŒ…è®¢å•æ‰“åŒ…å‘˜:', packingOrders.map(o => `${o.order_no}:${o.packer_staff ? 'å·²åˆ†é…' : 'æœªåˆ†é…'}`))\n  console.log('   å‘è´§è®¢å•åŒ…è£…:', shippingOrders.map(o => `${o.order_no}:${o.package_type || 'æœªè®¾ç½®'}`))\n  \n  return statusCount\n}\n\n// æµ‹è¯•çŠ¶æ€æµè½¬\nfunction testStatusFlow(orderNo) {\n  const orders = JSON.parse(localStorage.getItem('outbound_orders') || '[]')\n  const order = orders.find(o => o.order_no === orderNo)\n  \n  if (!order) {\n    console.log('âŒ è®¢å•ä¸å­˜åœ¨:', orderNo)\n    return false\n  }\n  \n  console.log('ğŸ”„ æµ‹è¯•è®¢å•çŠ¶æ€æµè½¬:', orderNo)\n  console.log('   å½“å‰çŠ¶æ€:', order.status)\n  \n  const nextStatus = {\n    'draft': 'pre_delivery',\n    'pre_delivery': 'picking', \n    'picking': 'packing',\n    'packing': 'shipping',\n    'shipping': 'completed'\n  }\n  \n  if (nextStatus[order.status]) {\n    const index = orders.findIndex(o => o.id === order.id)\n    orders[index].status = nextStatus[order.status]\n    orders[index].updated_at = new Date().toLocaleString()\n    localStorage.setItem('outbound_orders', JSON.stringify(orders))\n    \n    console.log('   âœ… çŠ¶æ€å·²æ›´æ–°ä¸º:', nextStatus[order.status])\n    console.log('   ğŸ”„ è¯·åˆ·æ–°é¡µé¢æŸ¥çœ‹å˜åŒ–')\n    return true\n  } else {\n    console.log('   â„¹ï¸ è®¢å•å·²æ˜¯æœ€ç»ˆçŠ¶æ€')\n    return false\n  }\n}\n\n// å¯¼å‡ºåˆ°å…¨å±€\nwindow.ultimateOutboundFix = ultimateOutboundFix\nwindow.verifyAllSteps = verifyAllSteps\nwindow.testStatusFlow = testStatusFlow\n\nconsole.log('ğŸ”¥ ç»ˆæå‡ºåº“æµç¨‹ä¿®å¤è„šæœ¬å·²åŠ è½½')\nconsole.log('ğŸš€ è¿è¡Œ ultimateOutboundFix() ç»ˆæä¿®å¤æ‰€æœ‰é—®é¢˜')\nconsole.log('ğŸ” è¿è¡Œ verifyAllSteps() éªŒè¯æ‰€æœ‰ç¯èŠ‚')\nconsole.log('ğŸ”„ è¿è¡Œ testStatusFlow(\"è®¢å•å·\") æµ‹è¯•çŠ¶æ€æµè½¬')